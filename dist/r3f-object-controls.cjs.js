"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const T=require("@react-three/fiber"),s=require("react"),u=require("three");function X({object:c,orbitControl:a,dampingFactor:p=.1,maxRotationX:O=Math.PI/2,minRotationX:P=-Math.PI/2,enableXRotation:f=!0,enableYRotation:v=!0}){const{gl:d,camera:S}=T.useThree(),[i,m]=s.useState(!1),[y,I]=s.useState({x:0,y:0}),E=s.useRef(new u.Euler),L=s.useRef(new u.Euler),M=s.useRef(new u.Raycaster),g=s.useRef(new u.Vector2),U=(e,n)=>{const r=d.domElement.getBoundingClientRect();return g.current.x=(e-r.left)/r.width*2-1,g.current.y=-((n-r.top)/r.height)*2+1,M.current.setFromCamera(g.current,S),M.current.intersectObject(c.current,!0).length>0},w=(e,n)=>{U(e,n)&&(m(!0),I({x:e,y:n}),c.current&&E.current.copy(c.current.rotation))},x=(e,n)=>{if(!i||!c.current)return;const r=e-y.x,o=n-y.y,l=f?E.current.x+o*.01:c.current.rotation.x,h=v?E.current.y+r*.01:c.current.rotation.y;L.current.set(l,h,0)};return s.useEffect(()=>{const e=d.domElement;e.style.cursor=i?"grabbing":"default";const n=t=>w(t.clientX,t.clientY),r=t=>x(t.clientX,t.clientY),o=()=>m(!1),l=t=>{t.touches.length===1&&(t.preventDefault(),w(t.touches[0].clientX,t.touches[0].clientY))},h=t=>{t.touches.length===1&&(t.preventDefault(),x(t.touches[0].clientX,t.touches[0].clientY))},R=()=>m(!1);return e.addEventListener("mousedown",n),e.addEventListener("mousemove",r),e.addEventListener("mouseup",o),e.addEventListener("touchstart",l,{passive:!1}),e.addEventListener("touchmove",h,{passive:!1}),e.addEventListener("touchend",R),()=>{e.removeEventListener("mousedown",n),e.removeEventListener("mousemove",r),e.removeEventListener("mouseup",o),e.removeEventListener("touchstart",l),e.removeEventListener("touchmove",h),e.removeEventListener("touchend",R)}},[d,i,f,v]),s.useEffect(()=>{a&&a.current&&(a.current.enabled=!i)},[i,a]),T.useFrame(()=>{const e=c.current;if(!e)return;const n=e.rotation,r=L.current,o=u.MathUtils.clamp(r.x,P,O);f&&(n.x=u.MathUtils.lerp(n.x,o,p)),v&&(n.y=u.MathUtils.lerp(n.y,r.y,p))}),null}exports.ObjectControls=X;
